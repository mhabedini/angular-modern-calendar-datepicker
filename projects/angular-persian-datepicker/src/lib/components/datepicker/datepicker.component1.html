<div
  [class.dark]="darkMode"
  [dir]="dateService.config.rtl ? 'rtl' : 'ltr'"
  [class.font-sans_en]="calendarType === CalendarType.GREGORIAN"
  class="flex flex-col w-[22.5rem] border rounded-xl py-4 bg-white dark:bg-gray-800">
  <div class="flex flex-row justify-between items-center px-4">
    <a
      (click)="onPreviousMonthClick()"
      class="cursor-pointer ps-0.5 py-2 leading-4 flex flex-row items-center text-xs text-gray-500 dark:text-gray-200 gap-1">
      <div class="border-s border-b border-primary w-2 h-2 rtl:-rotate-45 ltr:rotate-45"></div>
      {{dateService.options.translate.previousMonth}}
    </a>
    <div
      class="flex justify-center text-primary gap-2">
      <div
        (click)="onYearToggle()"
        class="rounded-full bg-primary bg-opacity-10 dark:bg-opacity-20 px-4 py-2 cursor-pointer font-bold text-sm">
        {{dateService.currentYear}}
      </div>

      <div
        (click)="onMonthToggle()"
        class="rounded-full bg-primary leading-4 bg-opacity-10 px-4 py-2 cursor-pointer font-bold text-sm">
        {{dateService.currentMonthName}}
      </div>
    </div>
    <div
      (click)="onNextMonthClick()"
      class="cursor-pointer pe-0.5 py-2 flex flex-row items-center text-xs text-gray-500 dark:text-gray-200 gap-1">
      {{dateService.options.translate.nextMonth}}
      <div class="border-e border-t border-primary w-2 h-2 rtl:-rotate-45 ltr:rotate-45"></div>
    </div>
  </div>

  <div
    *ngIf="calendarSelectorMode === 'date'"
    class="flex flex-col mt-4 px-4">
    <div class="flex flex-row gap-2 text-sm bg-primary text-white rounded-lg">
      <div
        [class.text-xs]="calendarType === CalendarType.HIJRI"
        class="flex w-10 h-10 items-center justify-center"
        *ngFor="let day of dateService.weekdaysShort">{{day}}</div>
    </div>

    <div class="flex flex-col mt-4 gap-4">
      <div
        *ngFor="let week of dates"
        class="flex flex-row">
        <div
          (mouseover)="hoveredDay = day.date"
          (mouseleave)="hoveredDay = null"
          [class.datepicker-item__active-range-between]="selectedStartDate && selectedEndDate && day.date.isBetween(selectedStartDate, selectedEndDate)"
          [class.datepicker-item__active-range-between-hovered]="!selectedEndDate && selectedStartDate && hoveredDay && day.date.isBetween(selectedStartDate, hoveredDay)"
          class="flex w-12 h-10 font-medium text-black dark:text-white justify-center datepicker-item"
          *ngFor="let day of week">
          <div
            class="flex flex-col cursor-pointer items-center justify-center leading-4 w-10 rounded"
            [class.datepicker-item__weekend]="!(selectedStartDate && selectedEndDate && (day.date.isSame(selectedStartDate) || day.date.isSame(selectedEndDate))) && dateService.config.weekends.includes(day.weekDay)"
            [class.datepicker-item__selected-date]="day.date.isSame(selectedStartDate) || day.date.isSame(selectedEndDate) || day.date.isSame(selectedDate)"
            [class.datepicker-item__hovered]="!(selectedStartDate && selectedEndDate && (day.date.isSame(selectedStartDate) || day.date.isSame(selectedEndDate))) && !(selectedStartDate && selectedEndDate && day.date.isBetween(selectedStartDate, selectedEndDate))"
            [class.datepicker-item__today]="day.isToday && !(selectedStartDate && selectedEndDate && day.date.isBetween(selectedStartDate, selectedEndDate))"
            [class.datepicker-item__disabled]="!day.isForCurrentMonth"
            (click)="onNewDateSelect(day)">
            {{day.day}}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class=" px-4" *ngIf="calendarSelectorMode === 'month'">
    <div class="grid grid-cols-3 grid-rows-4 mt-4 gap-2">
      <div class="w-full flex items-center justify-center hover:font-bold
         h-16 border rounded-lg cursor-pointer text-sm hover:border-none
         hover:bg-opacity-10 hover:bg-primary hover:text-primary"
           [class.!border-primary]="month === dateService.currentMonthName"
           [class.!text-primary]="month === dateService.currentMonthName"
           (click)="changeCurrentMonth(i)"
           *ngFor="let month of dateService.months; let i = index;">
        {{month}}
      </div>
    </div>
  </div>

  <div class="ps-4 pe-2" *ngIf="calendarSelectorMode === 'year'">
    <div
      class="flex flex-col mt-4 gap-2 h-80 overflow-y-scroll">
      <div class="grid grid-cols-4 gap-2 mb-2" *uiScroll="let data of datasource">
        <div class="w-full flex items-center justify-center hover:font-bold
         h-10 border rounded-lg cursor-pointer text-sm hover:border-none gap-2
         hover:bg-opacity-10 hover:bg-primary hover:text-primary"
             *ngFor="let year of range(data * 4, data * 4 + 3, 1)"
             [class.!border-primary]="year == dateService.currentYear"
             [class.!text-primary]="year == dateService.currentYear"
             (click)="changeCurrentYear(year)">
          {{year}}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3 px-4">
    <a (click)="onGoToTodayClick()"
       class="h-10 bg-primary bg-opacity-10 font-bold dark:bg-opacity-20 rounded-lg text-primary text-sm flex items-center justify-center cursor-pointer">
      {{dateService.options.translate.goToToday}}
    </a>
  </div>
</div>
